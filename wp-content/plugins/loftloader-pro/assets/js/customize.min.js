!function(l,c){"use strict";function a(){var s=l.settings.settings,r={},t=l.settings.controls;c.each(t,function(o,n){var t,e,i,a=(t=n.settings,e=Object.keys(t),!!(i="default"in t?"default":!!e.length&&e[0])&&t[i]);a&&s[a]&&s[a].dependency&&c.each(s[a].dependency,function(e,t){var i={control:l.control(o)||n,dependency:s[a].dependency};e in r?r[e].push(i):(r[e]=[i],l(e).bind(function(t){l.trigger("loftloader.setting.change",e)}))})}),l.LoftLoaderDependency=r}c("head").append(c("<style>",{id:"loftloader-pro-hide-site-title",text:".site-title { opacity:  0; }"})),l.LoftLoaderSwitchSection=l.Section.extend({initialize:function(){return l.Section.prototype.initialize.apply(this,arguments)},ready:function(){var t=this.container.find("input[name=loftloader-pro-main-switch]").is(":checked");c("#customize-theme-controls").attr("class","loftloader-controls-wrapper"),t||c("#customize-theme-controls").addClass("loftloader-settings-disabled")},attachEvents:function(){this.container.on("change","input[name=loftloader-pro-main-switch]",function(t){var e=c(this).is(":checked"),i=c("#customize-theme-controls");l("loftloader_pro_main_switch")(e),e?i.removeClass("loftloader-settings-disabled"):i.addClass("loftloader-settings-disabled")})}}),c.extend(l.sectionConstructor,{loftloader_switch:l.LoftLoaderSwitchSection}),l.controlConstructor.slider=l.Control.extend({ready:function(){var t=this.container.find(".loader-ui-slider"),i=this.container.find("input[data-customize-setting-link]");t.slider({range:"min",min:t.data("min"),max:t.data("max"),value:t.data("value"),step:t.data("step"),slide:function(t,e){i.val(e.value).trigger("change")}})}}),l.controlConstructor.loftocean_pro_query_posts=l.Control.extend({list:"",searchList:"",ready:function(){this.initValue(),this.addEvents()},initValue:function(){var i,t=this.id,e=!!l.settings.settings[t]&&l.settings.settings[t];e.list&&((i=this).list=this.container.find(".selected-list"),this.searchList=this.container.find(".search-results"),c.each(e.list,function(t,e){i.addItem({pid:t,title:e})}))},addItem:function(t){this.list.append(c("<li>",{class:"list-item",html:t.title,"data-post-id":t.pid}).append(c("<a>",{href:"#",class:"remove-item",text:"x"})))},showSearchItems:function(t){var i=this.searchList,e=this.container.find("input[data-customize-setting-link]"),o=""!=(o=e.val())?o.split(","):[];i.html(""),c.each(t,function(t,e){-1===o.indexOf(t)&&i.append(c("<li>",{class:"search-result-item",html:e,"data-post-id":t}))}),i.children().length?this.container.find(".clear-search-results").removeClass("hide"):(i.append(c("<li>",{class:"nothing-found",text:"Nothing found"})),this.container.find(".clear-search-results").addClass("hide"))},addEvents:function(){var n=!1,a=this,s=(this.container.find(".selected-list"),this.container.find("input[data-customize-setting-link]"));this.container.on("click",".search-results .search-result-item",function(t){t.preventDefault();var e=c(this),i=e.data("post-id"),o=e.html(),n=s.val();(n=""!=n?n.split(","):[]).push(i),s.val(n.join(",")).trigger("change"),a.addItem({pid:i,title:o}),e.remove()}).on("click",".selected-list .remove-item",function(t){t.preventDefault();var e=c(this).parent(),i=[];c(this).parents(".selected-list").children().not(e).each(function(){i.push(c(this).data("post-id"))}),s.val(i.join(",")).trigger("change"),e.remove()}).on("click",".clear-search-results",function(t){t.preventDefault(),a.container.find("input.search-posts").val(""),a.searchList.html(""),c(this).addClass("hide")}).on("keyup","input.search-posts",function(t){t.preventDefault();var e=c(this).val(),i={action:loftloaderProCustomize.ajax.action},o=c(this).data("post-type");if(""==e)return a.searchList.html(""),!1;o&&(i.post_type=o),13!=t.keyCode&&(n&&(clearTimeout(n),n=!1),n=setTimeout(function(){i.title_sesrch=e,c.post(loftloaderProCustomize.ajax.url,i).done(function(t){t&&t.success&&t.data?a.showSearchItems(t.data):a.searchList.html("").append(c("<li>",{class:"nothing-found",text:"Nothing found"}))}).fail(function(){a.searchList.html("").append(c("<li>",{class:"nothing-found",text:"Nothing found"}))})},450))})}}),l.bind("loftloader.message.position",function(){var t=c("input[data-customize-setting-link=loftloader_progress]:checked").val(),e=c("input[data-customize-setting-link=loftloader_percentageposition]:checked").val(),i=c("input[data-customize-setting-link=loftloader_barposition]:checked").val(),o=c("input[data-customize-setting-link=loftloader_pro_message_position]"),n=o.filter("[value=middle]");"bar"===t&&"middle"===i||"number"===t&&"below"===e?n.parent().css("display",""):(o.filter("[value=middle]:checked").length&&(o.filter("[value=bottom]").attr("checked","").trigger("change"),n.removeAttr("checked")),n.parent().css("display","none"))}),l.bind("loftloader.setting.change",function(t){t in l.LoftLoaderDependency&&c.each(l.LoftLoaderDependency[t],function(t,e){var i=e.control.container,n=!0;c.each(e.dependency,function(t,e){var i=e.operator||"in",o=function(t){if(t in l.settings.settings){var e=l.get()[t];return!0===e?"on":e}}(t);if("in"==i&&-1===e.value.indexOf(o)||"not in"==i&&-1!==e.value.indexOf(o))return n=!1}),n?i.show():i.hide()})}),l("loftloader_pro_load_time",function(r){r.validate=function(t){var e,i,o="",n=parseInt(10*t,10),a=l("loftloader_pro_max_load_time"),s=a();return r.notifications.remove("nan"),r.notifications.remove("nain"),r.notifications.remove("too-large"),isNaN(n)||""===t||void 0===t?(o="nan",e=new wp.customize.Notification(o,{message:loftloaderProCustomize.i18nText.nan}),r.notifications.add(o,e)):n<0?(o="nain",e=new wp.customize.Notification(o,{message:loftloaderProCustomize.i18nText.nain}),r.notifications.add(o,e)):0<n&&0<s&&s<n/10&&(o="too-large",e=new wp.customize.Notification(o,{message:loftloaderProCustomize.i18nText.minTooLarge.replace("%d",s)}),r.notifications.add(o,e)),a&&((i=a.notifications).remove("too-small"),"too-large"==o&&(o="too-small",e=new wp.customize.Notification(o,{message:loftloaderProCustomize.i18nText.maxTooSmall.replace("%d",t)}),i.add(o,e))),t}}),l("loftloader_pro_max_load_time",function(r){r.validate=function(t){var e,i,o="",n=parseInt(10*t,10),a=l("loftloader_pro_load_time"),s=a();return r.notifications.remove("nan"),r.notifications.remove("nain"),r.notifications.remove("too-small"),isNaN(n)||""===t||void 0===t?(o="nan",e=new wp.customize.Notification(o,{message:loftloaderProCustomize.i18nText.nan}),r.notifications.add(o,e)):n<0?(o="nain",e=new wp.customize.Notification(o,{message:loftloaderProCustomize.i18nText.nain}),r.notifications.add(o,e)):0<n&&0<s&&n/10<s&&(o="too-small",e=new wp.customize.Notification(o,{message:loftloaderProCustomize.i18nText.maxTooSmall.replace("%d",s)}),r.notifications.add(o,e)),a&&((i=a.notifications).remove("too-large"),"too-small"==o&&(o="too-large",e=new wp.customize.Notification(o,{message:loftloaderProCustomize.i18nText.minTooLarge.replace("%d",t)}),i.add(o,e))),t}}),l.bind("ready",function(t){var e,i=document.createElement("a");i.href=l.previewer.previewUrl(),e=l.utils.parseQueryString(i.search.substr(1)),a(),l.previewer.unbind("url").bind("url",function(t){var e,i=this,o=!1,n=document.createElement("a");n.href=t,n.search=c.param({plugin:"loftloader"}),t=n.href,i.scroll=0,e=function(){o=!0},i.previewUrl.bind(e),i.previewUrl.set(t),i.previewUrl.unbind(e),o||i.refresh()}),e.plugin||(e.plugin="loftloader",i.search=c.param(e),l.previewer.previewUrl.set(i.href)),loftloaderProCustomize&&loftloaderProCustomize.i18nText&&loftloaderProCustomize.i18nText.pluginName&&c(".site-title").text(loftloaderProCustomize.i18nText.pluginName),c("#loftloader-pro-hide-site-title").remove(),l.trigger("loftloader.message.position");var n=["loftloader_bgfilltype","loftloader_progress","loftloader_animation"];function o(t,e){var i,o;-1!==n.indexOf(e)&&(i=t.find("input[data-customize-setting-link]:checked").val(),o=t.parents("ul").first(),"none"===i?o.addClass("loftloader-control-disabled"):o.removeClass("loftloader-control-disabled"))}c.each(n,function(t,e){var i=c("input[data-customize-setting-link="+e+"]:checked");i.length&&o(i.parents("li.customize-control").first(),e)}),c("body").on("change","input[name=loftloader_pro_barwidth_unit]",function(t){l("loftloader_pro_progress_width_unit")(c(this).is(":checked"))}).on("change","input.loftlader-pro-checkbox",function(t){var e=c(this).siblings("input");e.length&&e.attr("data-customize-setting-link")&&l(e.attr("data-customize-setting-link"))(c(this).is(":checked"))}).on("change","input[type=number]",function(t){var e=c(this),i=!1,o=e.attr("min")?parseInt(e.attr("min"),10):1,n=e.val()?parseInt(e.val(),10):0,a=!!e.attr("max")&&parseInt(e.attr("max"),10);o&&n<o&&(n=o,i=!0),a&&a<n&&(n=a,i=!0),i&&e.val(n).trigger("change")}).on("click",".customize-more-toggle",function(t){t.preventDefault();var e=c(this),i=c(this).siblings(".customize-control-description");i.length&&(e.hasClass("expanded")?i.slideUp("slow"):i.slideDown("slow",function(){c(this).css("display","block")}),e.toggleClass("expanded"))}).on("change","input[type=radio]",function(t){var e=c(this).attr("data-customize-setting-link");switch(-1!==n.indexOf(e)&&o(c(this).parents("li.customize-control").first(),e),e){case"loftloader_progress":case"loftloader_barposition":case"loftloader_percentageposition":l.trigger("loftloader.message.position")}}).on("click",".loftloader-pro-any-page-generate",function(t){t.preventDefault();var e=l.loftloader_pro_generate_parameters();c(this).siblings(".loftloader-pro-any-page-shortcode").attr("rows",40).val("[loftloader "+e+"]").select()})})}(wp.customize,jQuery);
