(function(a){"use strict";function b(b){let c=b[0].querySelector(".tp-rental-overlay"),d=b[0].querySelector(".tp-input-field");a(".tp-search-input",b).on({focus:function(){c.style.cssText="visibility:visible;opacity:1;",d.style.cssText="z-index:1000;"},focusout:function(){c.style.cssText="visibility:hidden;opacity:0;",d.style.cssText="z-index:0;"}}),a(".tp-select",b).on("click",function(){c.style.cssText="visibility:visible;opacity:1;"}),a(".tp-rental-overlay",b).on("click",function(){c.style.cssText="visibility:hidden;opacity:0;"}),b.keyup(function(a){"Escape"===a.key&&(c.style.cssText="visibility:hidden;opacity:0;")})}var c=function(a,c){var d=a[0].querySelectorAll(".tp-search-bar"),e=c(".tp-search-bar",a),f=e.data("ajax_search"),g=e.data("acfdata"),h=e.data("genericfilter"),i=e.find(".tp-search-list-inner"),j=e.find(".tp-search-area"),k=e.find(".tp-search-header"),l=d[0].dataset?JSON.parse(d[0].dataset.resultSetting):[],m=d[0].dataset?JSON.parse(d[0].dataset.paginationData):[],n=d[0].dataset?JSON.parse(d[0].dataset.defaultData):[];i.css("transform","translateX(0)");let o=d[0].querySelectorAll(".tp-rental-overlay");0<o.length&&b(a);let p=d[0].querySelectorAll(".tp-sbar-dropdown");if(0<p.length&&(c(".tp-sbar-dropdown",a).on("click",function(){c(this).attr("tabindex",1).focus(),c(this).toggleClass("active"),c(this).find(".tp-sbar-dropdown-menu").slideToggle(300)}),c(".tp-sbar-dropdown",a).focusout(function(){c(this).removeClass("active"),c(this).find(".tp-sbar-dropdown-menu").slideUp(300)}),c(".tp-sbar-dropdown .tp-sbar-dropdown-menu .tp-searchbar-li",a).on("click",function(){c(this).parents(".tp-sbar-dropdown").find("span").text(c(this).text()),c(this).parents(".tp-sbar-dropdown").find("input").attr("value",c(this).attr("id")).change()})),"yes"==f.ajax){function b(){let b=c("input[name=s]",a).val(),e=c("input[name=taxonomy]",a).val(),o=c("input[name=post_type]",a).val();i.html(""),k.find(".tp-search-pagina",a).html("");let p={action:"tp_search_bar",searchData:c(".tp-search-form",a).serialize(),text:b,postper:f.post_page,GFilter:h,ACFilter:g,ResultData:m,DefaultData:n,nonce:f.nonce};c.ajax({url:theplus_ajax_url,method:"post",async:!1,data:p,beforeSend:function(){},success:function(a){let b=d[0].querySelectorAll(".tp-search-error"),c=d[0].querySelector(".tp-search-header");if(a.data.error&&0<b.length)return b[0].innerHTML=a.data.message,c.style.cssText="display:none",void j.slideDown(100);c.style.cssText="display:flex",b[0].innerHTML="";var e=a.data;if(e&&0!==e.post_count){let a=e.posts,b=null,c="",f="<div class=\""+".tp-search-slider tp-row".replace(".","")+"\">%s</div>",g="";for(b in j.slideDown(100),a)g+=u(a[b]),(0==(parseInt(b)+1)%e.limit_query||parseInt(b)===a.length-1)&&(c+=f.replace("%s",g),g="");if(i.html(c),l.TotalResult){let a=l.TotalResultTxt?l.TotalResultTxt:"";k.find(".tp-search-resultcount").html(e.post_count+" "+a)}e.pagination?(d[0].querySelector(".tp-search-pagina").innerHTML=e.pagination,x(".tp-search-slider tp-row",i,e,p)):e.loadmore?(d[0].querySelector(".ajax_load_more").innerHTML=e.loadmore,v(".tp-search-slider tp-row",i,e,p)):e.lazymore&&(d[0].querySelector(".ajax_lazy_load").innerHTML=e.lazymore,w(".tp-search-slider tp-row",i,e,p))}else return b[0].innerHTML=l.errormsg,c.style.cssText="display:none",void j.slideDown(400)},complete:function(){}}).then(function(){setTimeout(function(){d[0].querySelector(".tp-ajx-loading").style.cssText="display:none",d[0].querySelector(".tp-close-btn").style.cssText="display:flex"},500),A()})}var q=m.PNavigation?m.PNavigation:0,r=f&&f.post_page?f.post_page:3,s=f&&f.ajaxsearchCharLimit?f.ajaxsearchCharLimit:3,t=null;c(d[0]).on("change keyup",function(f){let e=f.type,g=c("input[name=s]",a).val(),h=c("input[name=post_type]",a).val(),i=c("input[name=taxonomy]",a).val(),j=c("input[name=cat]",a).val();if("keyup"==e&&g.length>s||"change"==e&&(h||h&&g.length>s||""==h&&g.length>s)||j||j&&g.length>s||""==j&&g.length>s)d[0].querySelector(".tp-close-btn").style.cssText="display:none",d[0].querySelector(".tp-ajx-loading").style.cssText="display:flex",clearTimeout(t),t=setTimeout(b.bind(void 0,f.target.value),400);else{d[0].querySelectorAll(".tp-close-btn")}})}var u=function(a){let b="",c=a.title?a.title:"",d=a.content?a.content:"",e=l&&l.ResultlinkOn?l.ResultlinkOn:"",g=e&&l&&l.Resultlinktarget?`target="${l.Resultlinktarget}"`:"",h=e&&a&&a.link?`href="${a.link}"`:"";if(l.textlimit){if(l.TxtTitle){let a=l.textcount?l.textcount:100,b=l.textdots?l.textdots:"";"char"==l.texttype?c=c.substring(0,a)+b:"word"==l.texttype&&(c=c.split(" ",a).toString().replace(/,/g," ")+b)}if(l.Txtcont){let a=l.ContCount?l.ContCount:100,b=l.ContDots?l.ContDots:"";"char"==l.ContType?d=d.substring(0,a)+b:"word"==l.ContType&&(d=d.split(" ",a).toString().replace(/,/g," ")+b)}}return b+="<div class=\"tp-ser-item "+f.styleColumn+"\">",b+="<a class=\"tp-serpost-link\" "+h+" "+g+" >",l.ONThumb&&a.thumb&&(b+="<div class=\"tp-serpost-thumb\">",b+="<img class=\"tp-item-image\" src="+(""==a.thumb?"http://localhost/wordpress/wp-content/uploads/2020/05/placeholder.png":a.thumb)+">",b+="</div>"),b+="<div class=\"tp-serpost-wrap\">",(l.ONTitle&&c||l.ONPrice&&a.Wo_Price)&&(b+="<div class=\"tp-serpost-inner-wrap\">",l.ONTitle&&c&&(b+="<div class=\"tp-serpost-title\">"+c+"</div>"),l.ONPrice&&a.Wo_Price&&(b+="<div class=\"tp-serpost-price\">"+a.Wo_Price+"</div>"),b+="</div>"),l.ONContent&&d&&(b+="<div class=\"tp-serpost-excerpt\">"+d+"</div>"),l.ONShortDesc&&a.Wo_shortDesc&&(b+="<div class=\"tp-serpost-shortDesc\">"+a.Wo_shortDesc+"</div>"),b+="</div>",b+="</a>",b+="</div>",b},v=function(a,b,e,f){let g=d[0].querySelectorAll(".post-load-more"),h=d[0].querySelector(".tp-search-slider"),i=d[0].querySelectorAll(".tp-search-pagina");0<i.length&&(i[0].innerHTML=e.loadmore_page),0<g.length&&g[0].addEventListener("click",function(){let a=+this.dataset.page,b=+(a+1),e=d[0].querySelectorAll(".tp-ser-item");f.offset=e.length,f.loadNumpost=m.loadnumber,jQuery.ajax({url:theplus_ajax_url,method:"post",async:!1,data:f,beforeSend:function(){g[0].textContent=m.loadingtxt},success:function(a){g[0].textContent=m.loadbtntxt;let e=a.data.posts,f=a.data.total_count,j=null,k="";for(j in e)k+=u(e[j]);if(c(h).append(k),g[0].setAttribute("data-page",b),0<i.length){let a=i[0].querySelectorAll(".tp-load-number");a[0].textContent=b}let l=d[0].querySelectorAll(".tp-ser-item");l.length==f&&(g[0].classList.add("hide"),c(g[0].parentNode).append("<div class=\"plus-all-posts-loaded\">"+m.loadedtxt+"</div>"))},complete:function(){}})})},w=function(a,b,e,f){let g=d[0].querySelectorAll(".post-lazy-load"),h=d[0].querySelector(".tp-search-slider"),i=d[0].querySelectorAll(".tp-search-pagina");var j,k,l,n,o,p,q=c(window),r=function(){j=q.width(),k=q.height(),l=c("body").height(),o=c(".tp-search-area").height(),p=c(".tp-search-area").offset().top+50,setTimeout(function(){o=c(".tp-search-area").height(),p=c(".tp-search-area").offset().top+50},50)};r(),q.resize(r),q.bind("scroll",function(a){a.preventDefault(),r(),n=q.scrollTop(),o=c(".tp-search-area").height(),p=c(".tp-search-area").offset().top+50;var b=c(".tp-search-area").find(".post-lazy-load"),e=d[0].querySelectorAll(".tp-ser-item");if(f.offset=e.length,f.loadNumpost=m.loadnumber,c(".tp-search-area").find(".post-lazy-load").length&&n<l&&n+60>o+p-k){if(b.data("requestRunning"))return;b.data("requestRunning",!0),jQuery.ajax({url:theplus_ajax_url,method:"post",async:!1,data:f,beforeSend:function(){},success:function(a){let b=a.data.posts,e=a.data.total_count,f=null,i="";for(f in b)i+=u(b[f]);c(h).append(i);let j=d[0].querySelectorAll(".tp-ser-item");j.length==e&&(g[0].classList.add("hide"),c(g[0].parentNode).append("<div class=\"plus-all-posts-loaded\">"+m.loadedtxt+"</div>"))},complete:function(){b.data("requestRunning",!1)}})}})},x=function(a,b,e,f){let g=d[0].querySelector(".tp-search-list-inner"),h=d[0].querySelectorAll(".tp-pagelink.tp-ajax-page"),i=d[0].querySelectorAll(".tp-pagelink.next"),j=d[0].querySelectorAll(".tp-pagelink.prev"),k=m.Pcounter?m.Pcounter:0,l=m.PClimit?m.PClimit:3;0<h.length&&h.forEach(function(a,b){if(1==+a.dataset.page){let a=d[0].querySelectorAll(".tp-search-slider");0<a.length&&a[0].classList.add("ajax-1")}else c(g).append("<div class=\"tp-search-slider tp-row ajax-"+ +(b+1)+"\"></div>");a.addEventListener("click",function(){let a=this.dataset.page,d=100*b;f.offset=a*r-r,z(h,a),q&&(j[0].setAttribute("data-prev",a),i[0].setAttribute("data-next",a));let k=g.querySelectorAll(".tp-search-slider.ajax-"+a);return 0<k.length&&k[0].querySelector(".tp-ser-item")?(g.style.cssText="transform: translateX("+-d+"%)",void y(e)):void jQuery.ajax({url:theplus_ajax_url,method:"post",async:!1,data:f,beforeSend:function(){},success:function(a){let b=a.data.posts,f=null,h="";for(f in b)h+=u(b[f]);c(k[0]).append(h),g.style.cssText="transform: translateX("+-d+"%)",y(e)},complete:function(){}})})}),0<i.length&&i[0].addEventListener("click",function(){let a=+this.dataset.next,b=a+1,d=-(100*a);f.offset=b*r-r,k&&h.forEach(function(a,c){if(b==+a.dataset.page&&a.classList.contains("hide")){a.classList.remove("hide"),h.forEach(function(a,b){+(c+1-l)==b+1&&a.classList.add("hide")})}}),z(h,b),q&&(j[0].setAttribute("data-prev",b),i[0].setAttribute("data-next",b));let m=g.querySelectorAll(".tp-search-slider.ajax-"+b);return 0<m.length&&m[0].querySelector(".tp-ser-item")?(g.style.cssText="transform: translateX("+d+"%)",void y(e)):void jQuery.ajax({url:theplus_ajax_url,method:"post",async:!1,data:f,beforeSend:function(){},success:function(a){let b=a.data.posts,f=null,h="";for(f in b)h+=u(b[f]);c(m[0]).append(h),g.style.cssText="transform: translateX("+d+"%)",y(e)},complete:function(){}})}),0<j.length&&j[0].addEventListener("click",function(){let a=+this.dataset.prev,b=a-1,d=-(100*b)+100;f.offset=b*r-r,k&&h.forEach(function(a,c){if(b==+a.dataset.page&&a.classList.contains("hide")){a.classList.remove("hide"),h.forEach(function(a,b){+(c+1+l)==b+1&&a.classList.add("hide")})}}),z(h,b),q&&(j[0].setAttribute("data-prev",b),i[0].setAttribute("data-next",b));let m=g.querySelectorAll(".tp-search-slider.ajax-"+b);return 0<m.length&&m[0].querySelector(".tp-ser-item")?(g.style.cssText="transform: translateX("+d+"%)",void y(e)):void jQuery.ajax({url:theplus_ajax_url,method:"post",async:!1,data:f,beforeSend:function(){},success:function(a){let b=a.data.posts,f=null,h="";for(f in b)h+=u(b[f]);c(m[0]).append(h),g.style.cssText="transform: translateX("+d+"%)",y(e)},complete:function(){}})})},y=function(a){if(a.columns){let b=d[0].querySelector(".tp-pagelink.next").dataset.next;parseInt(b)==a.columns?c(".tp-pagelink.next").hide():c(".tp-pagelink.next").show();let e=d[0].querySelector(".tp-pagelink.prev").dataset.prev;1==parseInt(e)?c(".tp-pagelink.prev").hide():c(".tp-pagelink.prev").show()}},z=function(a,b){0<a.length&&a.forEach(function(a){b==+a.dataset.page?a.classList.add("active"):a.classList.contains("active")&&a.classList.remove("active")})},A=function(){let b=d[0].querySelector(".tp-search-area"),f=d[0].querySelector("input[name=s]"),g=a[0].querySelectorAll(".tp-rental-overlay"),h=d[0].querySelector(".tp-close-btn");c(".tp-close-btn",a).on("click",function(){f.value="",c(this).hide(),c(b).slideUp(),0<g.length&&(g[0].style.cssText="visibility:hidden;opacity:0;")}),e.keyup(function(a){"Escape"===a.key&&(f.value="",c(b).slideUp(),h.style.cssText="display:none")})}};a(window).on("elementor/frontend/init",function(){elementorFrontend.hooks.addAction("frontend/element_ready/tp-search-bar.default",c)})})(jQuery);